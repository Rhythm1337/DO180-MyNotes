# Topic 1 Run Applications as Containers and Pods

## Containers:
A Container is a running instance of a **Container Image**.

A **Container Image** is a single file (tarball), loaded the files needed by your application. **Container images** have metadata which describe the image

A **Entry Point** is a container image metadata that describes the command to be executed whenever a **comtainer** is started from a **Container Image**.

## Commands:

```
oc new-project webserver
oc describe project/webserver
oc run webserver --image=quay.io/rdacosta/my_httpd:latest
oc get pods
oc exec pod/webserver --curl -s http://localhost:8080 (output: hello world)
oc exec pod/webserver -- id
oc exec pod/webserver -- tail /var/log/httpd/access_log
```

## Accessing the container:

```
oc login -u admin -p redhatocp https://api.ocp4.example.com:6443
oc get nodes

oc debug node/master01
chroot /host
crictl ps --name webserver
crictl ps --name webserver -o json | jq .containers[0].id (output: 542338)
nsenter -t 542338 -a curl -s http://localhost:8080 (output: hello world)
```

```
oc delete pod/webserver
oc delete project/webserver
```
# Topic 2 Guided Exercise: Create Linux Containers and Kubernetes Pods
Done!

# Topic 3 Find and Inspect Container Images

Container Image registries:
- registry.redhat.io (where authentication is required)
- catalog.redhat.com (no auth required)
- docker.io/library/wordpress (docker official images)

Container Image Identifiers:
- Name: registry.access.redhat.com
- ID/Hash: the sha256:4186a1ead13fc30796f951694c494e7630b82c320b81e20c020b3b07c888985b image ID always refers to the registry.access.redhat.com/ubi9/httpd-24:1-233 container image.
- Tag: registry.access.redhat.com/ubi9/httpd-24:1-233.1669634588

Container Image Components:
- Layers: 
Container images are created from instructions. Each instruction adds a layer to the container image. All layers are stacked together to create a read only **container image**.

- Metadata: 
Metadata has the instructions and documentation for a container image

Container Image Instructions and Metadata:

Container image layers consist of instructions / steps and metadata for building the image.

Instructions:

- ENV:
It defines as the envoirnment variable in the container

- ARG:
It defines build-time variables. It is useful for preserving the build-time variables for run time.

- USER:
Defines the active user in the container. Later instructions run as this user. It is a good practice to define a user other than root for security purposes. OpenShift does not honor the user in a container image, for regular cluster users. Only cluster administrators can run containers (pods) with their chosen user ID (UIDs) and group IDs (GIDs).

- ENTRYPOINT:
It defines the executable to run when the container is started.

- CMD:
It defines the command to execute when the container is started. This command is passed to the executable that the ENTRYPOINT instruction defines. Base images define a default ENTRYPOINT executable, which is usually a shell executable, such as Bash.

- WORKDIR:
It sets the current working directory within the container. Later instructions execute within this directory.

### Metadata is used for documentation purposes, and does not affect the state of a running container. You can also override the metadata values during container creation.
### The following metadata is for information only, and does not affect the state of the running container:

- EXPOSE:
It indicates the network port that the application binds to within the container. This metadata does not automatically bind the port on the host, and is used only for documentation purposes.

- VOLUME:
It defines where to store data outside the container. The value shows the path where your container runtime mounts the directory inside the container. More than one path can be defined to create multiple volumes.

- LABEL:
Adds a key-value pair to the metadata of the image for organization and image selection.

Container engines are not required to honor metadata in a container image, such as USER or EXPOSE. A container engine can also recognize additional environment variables that are not listed in the container image metadata.

Base Images:
A base image is the image that your resulting container image is built on. Your chosen base image determines the Linux distribution, and any of the following components:
- Package manager
- Init system
- File system layout
- Preinstalled dependencies and runtimes
